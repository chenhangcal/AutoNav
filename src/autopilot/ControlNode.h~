#pragma once

#ifndef _CONTROL_NODE_H_
#define _CONTROL_NODE_H_

#include <ros/ros.h>
#include "AutoNav/filter_state.h"
#include <dynamic_reconfigure/server.h>
#include "AutoNav/AutopilotParamsConfig.h"
#include "DroneController.h"
#include <std_msgs/String.h>

class ControlNode
{
 private:
  ros::NodeHandle n;

  ros::Subscriber state_sub;
  ros::Subscriber command_sub;

  bool goalSet;
  bool goalReached;

 public:
  ControlNode();
  void Loop();
  void commandCB(const std_msgs::StringConstPtr str);
  void stateCB(const AutoNav::filter_stateConstPtr state);
  void dynConfCB(AutoNav::AutopilotParamsConfig &config, uint32_t level);

  void beginHover();
};

#endif //ControlNode.h
